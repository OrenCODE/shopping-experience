<!--<div>-->
<!--  <div>-->
<!--    <input type="text" [(ngModel)]="searchValue" placeholder="Query..." />-->
<!--  </div>-->
<!--  <p [innerHTML]="highlight()"></p>-->
<!--</div>-->

<mat-progress-bar *ngIf="isLoading" mode="indeterminate"></mat-progress-bar>
<button mat-button routerLink="/shop">Back To the Shop</button>
<form>
  <input autocomplete="off" type="search" name="searchValue" placeholder="Search"
         [(ngModel)]="searchValue">
</form>
<div *ngIf="this.authService.userCart.products.length === 0">
  You have no products in your cart...
</div>
<div *ngIf="this.authService.userCart.products.length > 0">
  <div *ngIf="!isLoading">
    <div class="row" *ngFor="let cartProduct of currentCartProducts">
      <div class="col-md-5 to-left cartItem">
        <img class="cart-item-img" [src]="productsForCart[cartProduct._id].imageURL" alt="...">
      </div>
      <ul class="col-md-7 to-center">
        <li>
          <span>{{ cartProduct.quantity }}X </span>
          <span ngxTextHighlight
                [content]="productsForCart[cartProduct._id].name"
                [searchTerm]="searchValue"
                [caseSensitive]="false">
          </span>
          <div>{{ productsForCart[cartProduct._id].price * cartProduct.quantity | currency: 'USD'}}</div>
        </li>
      </ul>
    </div>
    <div>
      <p>Total: <span>{{ totalPrice | currency: 'USD' }}</span></p>
    </div>
  </div>

  <form [formGroup]="orderForm" (ngSubmit)="onOrderSubmit()">
    <h4>CHECKOUT</h4>

    <mat-form-field appearance="outline" class="justifier">
      <mat-label>Street</mat-label>
      <input matInput
             formControlName="street"
             id="street"
             type="text"
             (dblclick)="setUserAddress()">
      <mat-error *ngIf="orderForm.get('street').errors?.serverError">
        {{ orderForm.get('street').errors?.serverError }}
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="justifier">
      <mat-label>Your City</mat-label>
      <mat-select placeholder="City" formControlName="city">
        <mat-option *ngFor="let city of cities" [value]="city.value">
          {{city.viewValue}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="orderForm.get('city').errors?.serverError">
        {{ orderForm.get('city').errors?.serverError }}
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="justifier">
      <mat-label>Delivery Date</mat-label>
      <input matInput [matDatepicker]="picker"
             formControlName="deliveryDate"
             placeholder="Choose a date"
      >
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="orderForm.get('deliveryDate').errors?.serverError">
        {{ orderForm.get('deliveryDate').errors?.serverError }}
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="justifier">
      <mat-label>Credit Card</mat-label>
      <input matInput
             formControlName="creditCard"
             id="creditCard"
             type="text">
      <mat-error *ngIf="orderForm.get('creditCard').errors?.serverError">
        {{ orderForm.get('creditCard').errors?.serverError }}
      </mat-error>
    </mat-form-field>
    <button mat-button type="submit">Submit Your Order</button>
  </form>

</div>
